<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NightHub — Hidden Portal (Simulation)</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@300;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <canvas id="matrix"></canvas>
  <div class="grain"></div>

  <div class="wrap">
    <div class="card" role="main">
      <div class="left">
        <div style="display:flex;align-items:center;gap:10px">
          <div class="logo">NightHub<span class="badge">SIM</span></div>
        </div>
        <div class="onion">43a92d1b-9c61-4f2e-8b7a-<span style="opacity:.85">.onion</span></div>

        <div style="margin-top:16px">
          <div class="mini">Status</div>
          <div class="chip" id="statusChip">Connecting...</div>
        </div>

        <a class="btn" id="enterBtn">⊗ Open the Gate</a>

        <div style="margin-top:18px;font-size:13px;color:var(--muted)">
          <div class="small">A purely visual, educational simulation. No real back-end, no Tor, no illegal activity.</div>
        </div>
      </div>

      <div class="right">
        <h1><span class="glitch" data-text="NIGHT HUB">NIGHT HUB</span></h1>
        <div class="subtitle">A stylized, interactive mock of a hidden portal — great for demos and portfolios.</div>

        <div class="terminal" id="terminal">
          <div id="termContent">Initializing virtual kernel...
</div>
        </div>

        <div class="term-input">
          <input type="text" class="fake-input" id="fakeInput" placeholder="Type command..." autofocus>
          <a class="chip" id="runBtn">run</a>
        </div>

        <div class="controls">
          <div class="chip" id="flickerToggle">Flicker: ON</div>
          <div class="chip" id="matrixToggle">Matrix: ON</div>
          <div class="chip">Theme: Neon</div>
        </div>

      </div>
    </div>
  </div>

  <!-- fake login modal -->
  <div class="overlay" id="modal">
    <div class="modal">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
        <div><strong>Gate Login</strong><div class="small">enter dummy credentials (demo only)</div></div>
        <div class="small">session id: <span id="sess">—</span></div>
      </div>
      <div class="field"><label>node</label><input type="text" id="u" placeholder="node-17"></div>
      <div class="field"><label>pass</label><input type="password" id="p" placeholder="••••••"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button class="ghost" id="closeModal">Cancel</button>
        <button class="btn" id="loginBtn">Enter</button>
      </div>
      <div class="small" style="margin-top:6px; color: var(--muted);">Available accounts: Owner / Ownertest, node_17 / node17</div>
    </div>
  </div>

  <script>
    // ===== Matrix background =====
    const canvas = document.getElementById('matrix');
    const ctx = canvas.getContext('2d');
    function resize(){canvas.width = innerWidth; canvas.height = innerHeight}
    addEventListener('resize', resize); resize();

    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&*()-+=';
    const fontSize = 14;
    const cols = Math.floor(canvas.width / fontSize);
    let drops = new Array(cols).fill(1);

    let matrixOn = true;
    function drawMatrix(){
      if(!matrixOn) return; ctx.fillStyle = 'rgba(0,0,0,0.06)'; ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.fillStyle = '#00ffb3'; ctx.font = fontSize + 'px monospace';
      for(let i=0;i<drops.length;i++){
        const text = letters[Math.floor(Math.random()*letters.length)];
        ctx.fillText(text, i*fontSize, drops[i]*fontSize);
        if(drops[i]*fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0; drops[i]++;
      }
    }
    setInterval(() => { ctx.clearRect(0,0,canvas.width,canvas.height); if(matrixOn) drawMatrix(); }, 50);

    // ===== Terminal simulation =====
    const term = document.getElementById('termContent');
    const status = document.getElementById('statusChip');
    const sess = document.getElementById('sess');
    let sessionId = Math.random().toString(36).slice(2,10);
    sess.textContent = sessionId;

    const messages = [
      'Hardware virtualization: OK',
      'Virtual Tor stack: emulated',
      'Palette: neon',
      'Loading UI modules...',
      'Gate status: STANDBY',
      'Tip: click "Open the Gate" for theatrics'
    ];
    let mi = 0;
    function pushMsg(m){ term.innerHTML += '<div>'+m+'</div>'; term.parentElement.scrollTop = term.parentElement.scrollHeight }
    const intro = setInterval(()=>{ if(mi>=messages.length){ clearInterval(intro); pushMsg('\n> ready.'); status.textContent = 'Ready'; } else { pushMsg(messages[mi]); mi++; } }, 700);

    // ===== Flicker / enter button =====
    const overlay = document.getElementById('modal');
    document.getElementById('enterBtn').addEventListener('click', ()=>{ overlay.classList.add('open'); pushMsg('> gate requested — opening login modal...'); status.textContent = 'Awaiting login'; });
    document.getElementById('closeModal').addEventListener('click', ()=>{ overlay.classList.remove('open'); status.textContent = 'Ready'; pushMsg('> login canceled'); });

    // ===== Login with fixed accounts =====
    const accounts = {
      'Owner':'Ownertest',
      'node_17':'node17'
    };

    document.getElementById('loginBtn').addEventListener('click', ()=>{
      const u = document.getElementById('u').value.trim();
      const p = document.getElementById('p').value.trim();

      pushMsg('> authenticating ' + u + '...');
      status.textContent = 'Authenticating';

      setTimeout(()=>{
        if(accounts[u] && accounts[u] === p){
          pushMsg('> authentication successful — welcome '+ u);
          overlay.classList.remove('open');
          status.textContent = 'Connected';
        } else {
          pushMsg('> authentication failed — invalid credentials');
          status.textContent = 'Auth failed';
        }
      }, 900);
    });

    // ===== Terminal command input =====
    const runBtn = document.getElementById('runBtn');
    const fakeInput = document.getElementById('fakeInput');

    runBtn.addEventListener('click', ()=>{
      const cmd = fakeInput.value.trim();
      if(!cmd) return;
      pushMsg('\n> $ '+cmd);
      if(cmd === 'help') pushMsg('help — available: help, echo, reveal, chaos');
      else if(cmd.startsWith('echo ')) pushMsg(cmd.slice(5));
      else if(cmd === 'reveal') pushMsg('REVEAL: nothing to reveal. this is a demo.');
      else if(cmd === 'chaos') pushMsg('chaos module: simulated — enjoy visuals.');
      else pushMsg('command not found: '+cmd);
      fakeInput.value = '';
    });

    // Enter key support
    fakeInput.addEventListener('keydown', function(e){
      if(e.key === 'Enter'){ runBtn.click(); }
    });

    // toggles
    const flickerToggle = document.getElementById('flickerToggle');
    let flicker = true;
    flickerToggle.addEventListener('click', ()=>{ flicker = !flicker; flickerToggle.textContent = 'Flicker: '+(flicker? 'ON':'OFF'); document.body.style.filter = flicker? 'none':'brightness(0.98)'; });

    const matrixToggle = document.getElementById('matrixToggle');
    matrixToggle.addEventListener('click', ()=>{ matrixOn = !matrixOn; matrixToggle.textContent = 'Matrix: '+(matrixOn? 'ON':'OFF'); if(!matrixOn) ctx.clearRect(0,0,canvas.width,canvas.height); });

    // subtle flicker animation
    setInterval(()=>{
      if(flicker){ document.querySelectorAll('.card').forEach(c=>c.style.transform = (Math.random()>0.98)? 'translateX('+ (Math.random()*2-1) +'px)':'' ); }
    }, 2200);

    // copy fake onion address
    document.querySelector('.onion').addEventListener('click', function(){ const t = this.textContent.trim(); navigator.clipboard && navigator.clipboard.writeText(t); pushMsg('> copied: '+t); });

  </script>
</body>
</html>
